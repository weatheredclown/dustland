<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dustland: CRT Edition</title>
  <link rel="stylesheet" href="dustland.css" />
</head>
<body>
  <div id="nanoStatus">
    <div id="nanoProgress" class="nano-progress"></div>
    <div id="nanoBadge" class="nano-badge off">✗</div>
  </div>
  <div class="wrap">
    <div class="crt-wrap" style="flex:1;display:flex;align-items:center;justify-content:center">
      <div class="tube">
        <canvas id="game" width="640" height="480" class="glow" aria-label="Dustland CRT"></canvas>
      </div>
    </div>
    <aside class="panel">
      <h1>DUSTLAND // CRT v0.6.7</h1>
      <div class="content" id="log"></div>
      <div class="content">
        <div class="hud">
          <div class="badge">HP: <span id="hp">10</span></div>
          <div class="badge">AP: <span id="ap">2</span></div>
          <div class="badge">Scrap: <span id="scrap">0</span></div>
          <div class="badge">Map: <span id="mapname">—</span></div>
        </div>
        <p class="muted" style="margin-top:10px">Controls: <b>WASD/Arrows</b> move • <b>E/Space</b> interact/door & take nearby item • <b>T</b> take item • <b>I</b> Inventory • <b>P</b> Party • <b>Q</b> Quests • <b>G/L</b> save/load • <b>M</b> minimap • <b>Esc</b> close</p>
        <div class="tabs">
          <div class="tab active" id="tabInv">Inventory</div>
          <div class="tab" id="tabParty">Party</div>
          <div class="tab" id="tabQuests">Quests</div>
        </div>
        <div class="tabwrap" id="tabWrap">
          <div id="inv"></div>
          <div id="party" style="display:none"></div>
          <div id="quests" style="display:none"></div>
        </div>
        <div style="margin-top:8px">
          <button class="btn" id="saveBtn">Save</button>
          <button class="btn" id="loadBtn">Load</button>
          <button class="btn" id="resetBtn">Reset</button>
          <button class="btn" id="nanoToggle">Nano Dialog</button>
        </div>
        </div>
      </aside>
    </div>

  <!-- Start Menu -->
  <div id="start">
    <div class="win">
      <header>Dustland — Start</header>
      <main>
        <p class="muted">Continue your journey or start a new game?</p>
        <div>
          <button class="btn" id="startContinue">Continue</button>
          <button class="btn" id="startNew">New Game</button>
        </div>
      </main>
    </div>
  </div>

  <!-- Dialog overlay -->
  <div class="overlay" id="overlay" role="dialog" aria-modal="true">
    <div class="dialog">
      <header>
        <div class="portrait" id="port"></div>
        <div><div id="npcName" style="font-weight:700"></div><div class="small" id="npcTitle"></div></div>
      </header>
      <main id="dialogText"></main>
      <div class="choices" id="choices"></div>
    </div>
  </div>

  <!-- Character Creator -->
  <div id="creator" style="display:none">
    <div class="win">
      <header>
        <div><b>Dustland: Party Creation</b> — <span id="ccStep">1</span>/5</div>
        <div class="small">Create up to 3 drifters (or start now)</div>
      </header>
      <main>
        <div class="pbox">
          <div class="p" id="ccPortrait">@</div>
        </div>
        <div id="ccRight"></div>
      </main>
      <div class="footer">
        <div class="small" id="ccHint">Pick a name and portrait.</div>
        <div class="right">
          <button class="btn" id="ccLoad">Load Game</button>
          <button class="btn" id="ccStart">Start Now</button>
          <button class="btn" id="ccBack">Back</button>
          <button class="btn" id="ccNext">Next</button>
        </div>
      </div>
    </div>
  </div>

  <script src="dustland-core.js"></script>
  <script>
    window._realOpenCreator = window.openCreator;
    window._realShowStart = window.showStart;
    window.openCreator = function(){};
    window.showStart = function(){};
  </script>
  <script src="dustland-nano.js"></script>
  <script src="dustland-engine.js"></script>
  <script src="module-picker.js"></script>
</body>
</html>

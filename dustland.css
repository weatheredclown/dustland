    :root { --ink:#d6e2cf; --bg:#0a0c0a; --frame:#141614; --accent:#9ef7a0; --muted:#7a8a7a; }
    html,body{height:100%;margin:0;background:var(--bg);color:var(--ink);font:14px/1.35 ui-monospace, SFMono-Regular, Menlo, Consolas, Liberation Mono, monospace;}
    .wrap{display:flex;gap:16px;padding:16px;box-sizing:border-box;height:100%;}
    canvas{background:#000;border:1px solid #263026;box-shadow:0 0 0 2px #000 inset,0 0 40px #000;image-rendering:pixelated;filter:contrast(1.06) saturate(1.1);}
    .panel{width:440px;background:#0b0d0b;border:1px solid #273027;border-radius:10px;display:flex;flex-direction:column;overflow:hidden}
    .panel h1{font-size:16px;margin:0;padding:10px 12px;background:#0f120f;border-bottom:1px solid #1a1f1a;color:#c7ff9e;font-weight:800;letter-spacing:.6px}
    .panel .content{padding:12px;flex:1;overflow:auto}
    .hud{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}
    .badge{border:1px solid #283228;padding:6px 8px;border-radius:8px;background:#0e110e}
    .muted{color:var(--muted)}
    .btn{display:inline-block;text-align:center;padding:8px 10px;margin:6px 6px 0 0;border-radius:6px;background:#121612;border:1px solid #2a372a;color:var(--ink);cursor:pointer}
    .btn:hover{border-color:#4f6b4f;background:#151b15}
    .tabs{display:flex;gap:6px;margin:8px 0}
    .tab{padding:6px 8px;border:1px solid #273027;border-radius:6px;cursor:pointer;background:#0f120f}
    .tab.active{outline:1px solid #4f6b4f}
    #inv{display:grid;grid-template-columns:1fr;gap:6px;margin-top:8px}
    .slot{padding:6px 8px;border:1px dashed #2b382b;border-radius:6px;background:#0c0f0c}
    .slot.clickable{cursor:pointer}
    #party{display:grid;grid-template-columns:1fr;gap:8px}
    .pcard{border:1px solid #273027;border-radius:8px;background:#0f120f;padding:8px}
    .row{display:flex;flex-wrap:wrap;gap:8px}
    #quests{display:grid;grid-template-columns:1fr;gap:8px}
    .q{border:1px solid #273027;border-radius:8px;background:#0f120f;padding:8px}
    .q .status{color:#9ab09a}
    .overlay{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.6);z-index:20}
    .overlay.shown{display:flex}
    .dialog{width:min(680px,92vw);background:#0b0d0b;border:1px solid #2a382a;border-radius:10px;box-shadow:0 10px 30px rgba(0,0,0,.5)}
    .dialog header{padding:10px 12px;border-bottom:1px solid #223022;display:flex;align-items:center;gap:8px}
    .portrait{width:28px;height:28px;border-radius:50%;background:#274227;border:1px solid #1c261c}
    .dialog main{padding:12px}
    .choices{padding:0 12px 12px}
    .choice{padding:8px 10px;border:1px solid #253525;margin:8px 0;border-radius:6px;background:#0f120f;cursor:pointer}
    .choice:hover{border-color:#5c8a5c;background:#111711}
    .small{font-size:12px;color:#9ab09a}
    .crt-wrap{position:relative; perspective:1200px}
    .crt-wrap .tube{transform:rotateX(0.6deg) rotateY(-0.6deg); border-radius:18px; overflow:hidden; box-shadow:0 20px 60px rgba(0,0,0,.6)}
    .crt-wrap:before{content:"";position:absolute;inset:0;pointer-events:none;background:repeating-linear-gradient( to bottom, rgba(255,255,255,.05) 0px, rgba(255,255,255,.05) 1px, rgba(0,0,0,0) 2px );mix-blend-mode:overlay;opacity:.12}
    .crt-wrap:after{content:"";position:absolute;inset:-2px;pointer-events:none;border-radius:22px;box-shadow:inset 0 0 120px rgba(0,0,0,.95),inset 0 0 10px rgba(158,247,160,.25)}
    .glow{filter:drop-shadow(0 0 2px #9ef7a0) drop-shadow(0 0 6px #9ef7a0)}
    #creator{position:fixed;inset:0;background:rgba(0,0,0,.8);display:none;align-items:center;justify-content:center;z-index:25}
    #creator .win{width:min(820px,92vw);background:#0b0d0b;border:1px solid #2a382a;border-radius:14px;box-shadow:0 20px 80px rgba(0,0,0,.7);overflow:hidden}
    #creator header{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;border-bottom:1px solid #223022}
    #creator main{display:grid;grid-template-columns:300px 1fr;gap:12px;padding:12px}
    .pbox{height:220px;border:1px solid #273027;border-radius:10px;background:#0f120f;display:flex;align-items:center;justify-content:center;position:relative}
    .pbox:after{content:"";position:absolute;inset:0;background:repeating-linear-gradient( to bottom, rgba(255,255,255,.05) 0px, rgba(255,255,255,.05) 1px, rgba(0,0,0,0) 2px );mix-blend-mode:overlay;opacity:.15;pointer-events:none}
    .p{width:120px;height:120px;border-radius:50%;border:2px solid #293629;background:#203320;display:flex;align-items:center;justify-content:center;font-weight:800}
    .grid{display:grid;grid-template-columns:repeat(2,1fr);gap:8px}
    .field{display:flex;flex-direction:column;gap:4px}
    .range{display:flex;align-items:center;gap:6px}
    .range button{width:24px;height:24px}
    .row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    .pill{padding:4px 8px;border:1px solid #2a372a;border-radius:999px;cursor:pointer}
    .pill.sel{background:#121812}
    .footer{padding:10px 12px;border-top:1px solid #223022;display:flex;justify-content:space-between;gap:8px;align-items:center;flex-wrap:wrap}
    .footer .right{display:flex;gap:8px;align-items:center}
    #start{position:fixed;inset:0;background:rgba(0,0,0,.8);display:none;align-items:center;justify-content:center;z-index:30}
    #start .win{width:min(420px,92vw);background:#0b0d0b;border:1px solid #2a382a;border-radius:12px;box-shadow:0 20px 80px rgba(0,0,0,.7);overflow:hidden}
    #start header{padding:10px 12px;border-bottom:1px solid #223022;font-weight:700}
    #start main{padding:12px}

    #nanoStatus{position:fixed;top:6px;right:6px;display:flex;gap:6px;align-items:center;z-index:40;font-size:12px}
    .nano-progress{width:18px;height:18px;border-radius:50%;border:1px solid #273027;background:conic-gradient(var(--accent) 0%,#273027 0);display:none}
    .nano-badge{width:18px;height:18px;border:1px solid #273027;border-radius:50%;display:flex;align-items:center;justify-content:center;background:#0f120f;color:var(--accent);font-weight:700}
    .nano-badge.on{background:#0c0;color:#021}
    .nano-badge.off{background:#333;color:#666}
    .nano-badge.failed{background:#800;color:#fff}
    .nano-badge.busy{animation:nano-spin 1s linear infinite;background:#fe0;color:#000}
    @keyframes nano-spin{to{transform:rotate(360deg)}}


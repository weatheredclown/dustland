_______________________________________________________________________________
|                                                                             |
|  ▓█████▄  █    ██   ██████ ▄▄▄█████▓  ██▓     ▒█████   ███▄    █ ▓█████▄    |
|  ▒██▀ ██▌ ██  ▓██▒▒██    ▒ ▓  ██▒ ▓▒ ▓██▒    ▒██▒  ██▒ ██ ▀█   █ ▒██▀ ██▌   |
|  ░██   █▌▓██  ▒██░░ ▓██▄   ▒ ▓██░ ▒░ ▒██░    ▒███████▒▓██  ▀█ ██▒░██   █▌   |
|  ░▓█▄   ▌▓▓█  ░██░  ▒   ██▒░ ▓██▓ ░  ▒██░    ▒██   ██░▓██▒  ▐▌██▒░▓█▄   ▌   |
|  ░▒████▓ ▒▒█████▓ ▒██████▒▒  ▒██▒ ░  ░██████▒░ █    ▓▒░▒██░   ▓██░░▒████▓    |
|   ▒▒▓  ▒ ░▒▓▒ ▒ ▒ ▒ ▒▓▒ ▒ ░  ▒ ░░    ░ ▒░▓  ░░ ▒░ ░▒░ ░ ▒░   ▒ ▒  ▒▒▓  ▒    |
|   ░ ▒  ▒ ░░▒░ ░ ░ ░ ░▒  ░ ░    ░     ░ ░ ▒  ░  ░   ▒░ ░ ░░   ░ ▒░ ░ ▒  ▒    |
|   ░ ░  ░  ░░░ ░ ░ ░  ░  ░    ░         ░ ░   ░ ░   ▒     ░   ░ ░  ░ ░  ░    |
|     ░       ░           ░                ░  ░      ░           ░    ░       |
|                           D U S T L A N D   C R T                           |
|                      Wasteland-style browser RPG (WIP)                      |
|                               v0.16.0 .NFO                                  |
|_____________________________________________________________________________|

[ ABOUT ]
  Dustland CRT is a work-in-progress browser RPG with a crunchy CRT vibe,
  branching dialog, party stats, inventory, quests, and a world+hall demo.
  The repo now ships with an Adventure Construction Kit (ACK) and a tiny
  module player so you can craft and try your own wasteland tales. It’s
  still built to be easy to run and easy to hack. Tiny inline SFX add a bit of
  snap without requiring extra assets.
  The terrain editor lets you paint features with organic noise and adjustable brush sizes.

[ HOW TO RUN ]
  - Play online: https://weatheredclown.github.io/dustland/dustland.html
  - Run locally: open dustland.html (no build step; works offline)
  - Build modules: adventure-kit.html
  - Play modules: dustland.html?ack-player=1 (load module URLs or local JSON)
  - Tip: use a modern Chromium, Firefox, or Safari

[ CONTROLS ]
  Movement .......... WASD / Arrow Keys
  Interact/Take/Wait ..... E / Space / T (space waits if nothing nearby)
  Inventory ......... I (click items to equip)
  Party ............. P          (radio button selects the acting member)
  Quests ............ Q
  Save / Load ....... G / L      (or UI buttons)
  Minimap ........... M
  Close Dialog ...... Esc
  Audio Toggle ...... UI button
  Touch Controls .... add ?touch=1 to URL for on-screen buttons

[ KEY MECHANICS ]
  - You cannot stand on NPCs (!) or items; they block movement.
  - Picking up: stand next to or on your tile and press E/Space or T.
  - The selected party member (radio in Party tab) makes skill rolls and
    receives XP for dialog checks and quest rewards.
  - World buildings appear as black structures; their doors lead to
    simple interiors you can enter directly from the overworld.
  - Water is bright blue and is not walkable; items won’t spawn in water.
  - Walking or waiting gradually restores HP for the selected party member.
  - Movement speed improves with the leader's AGI, including equipment bonuses. Items like the Boots of Speed further reduce movement delay.
  - Special moves spend Adrenaline. Starter techniques include Power Strike,
    Stun Grenade, First Aid, Adrenal Surge, and Guard.
  - Luck may boost attacks, soften incoming blows, and enhance healing from potions. Lucky moments are called out in the log.

[ CHARACTER CREATION ]
  - Start a new game at boot if no save is present.
  - Create 1–3 drifters (funny quirks, specializations, secret origins).
  - You’re NOT forced to fill all three slots—“Start Now” begins immediately.
  - You can also hit “Load Game” directly from creator.

[ SAVE DATA ]
  - Saved to localStorage under key: dustland_crt
  - “Reset” clears party/inventory and returns you to Creator.
  - To fully wipe: clear the site’s localStorage from your browser.

[ PROJECT LAYOUT ]
  - dustland.html
    * Entry point wiring up the canvas, UI, and scripts.
  - scripts/dustland-core.js
    * Game state, dialog system, inventory & equipment.
  - scripts/core/*.js
    * Core gameplay systems: combat, quests, NPCs, movement, etc.
  - scripts/dustland-engine.js
    * Renderer, input handling, HUD, and tiny sfx.
  - modules/dustland.module.js
    * NPCs, items, world data, and quests for the core adventure.
  - modules/golden.module.json
    * Sample module showcasing a fetch quest, stat gate, joinable NPC, timed spawn, event toasts, portal, chest loot drop, healing potion, combat, and a deep branching dialog NPC; default module for ACK player.
  - adventure-kit.html / scripts/adventure-kit.js
    * Map/NPC/item/quest editor for making modules. Includes palette-based
      interior and building editors with customizable door placement.
  - dustland.html?ack-player=1 / scripts/ack-player.js
    * Fetch a module JSON from the web or load a local file into the engine.
  - scripts/dustland-nano.js
    * On-device AI for dynamic dialog and content generation.
  - dustland.css
    * CRT styling and layout.
  - No external assets or libraries.

[ KNOWN GOOD BEHAVIOR (v0.16.0) ]
  - Stable boot: hall always renders before any modal (no blank canvas).
  - Items/NPCs draw before player (no sprite pop-under).
  - Loot from chests spawns on a nearby free tile (never under the player).
  - World building doors lead to interiors; hall top door exits to world.
  - “Selected” party member determines rolls & takes XP.

[ TROUBLESHOOTING ]
  - Black screen on load?
      * Hard refresh (Ctrl+F5 / Cmd+Shift+R).
      * Check console for errors.
      * If a corrupted save exists, click “Reset” or clear localStorage.
  - Can’t pick up items?
      * Press E/Space or T while standing next to (or on) the item tile.
  - Rolls/XP going to the wrong member?
      * Open Party tab and switch the Selected radio—this member becomes
        the leader for checks and XP.

  - Starts in Creator map instead of your module?
      * A module load error likely occurred. Check the console for exceptions.

[ HACKING NOTES ]
  - Plain JS scripts with globals; no build step or framework.
  - Gameplay logic is split into tiny systems: movement, collisions,
    interactions, and rendering order. This keeps cross-file conditionals
    low and makes adding new entities like bandits or doors easy.
  - Useful entry points (see docs/hacking-guide.md for more):
      * genWorld(), seedWorldContent()
      * makeNPC(), NPCS[], quests{}, itemDrops[]
      * refreshUI()
      * takeNearestItem(), interact(), move()
      * applyModule(data), openCreator()
      * uncurseItem(id)
  - NPC trees can be functions for dynamic dialog.
  - Dialog choices support `goto` targeting the player or NPC with optional relative coordinates.
  - Dialog choices can require or consume items by ID, slot, or tag.
  - Items support `equip.flag` and `unequip` teleport/message effects.
  - Tiles: see TILE enum + colors[] + walkable[].
  - Maps can be specified as arrays of emoji strings using `tileEmoji` (numeric grids still load).
  - Use `npm run module:export -- modules/dustland.module.js` to dump a module's layout
    to `data/modules/dustland.json`; edit and run `npm run module:import -- modules/dustland.module.js`
    to sync changes back.
  - Tests: run `npm install` to fetch dev deps like jsdom.
    Ensure system libs (libatk1.0-0, libatk-bridge2.0-0, libcups2, libdrm2,
    libxcomposite1, libxdamage1, libxfixes3, libxrandr2, libgbm1, libasound2,
    libnss3, libxshmfence1, libxkbcommon0) exist before `npm test`.
    Run `./install-deps.sh` on Debian/Ubuntu to install them.
    The main game still runs from the repo download alone.

[ FEATURE LOG ]
  - Zones support spawn tables with probability and min/max steps between combat.
  - ACK player can fetch modules by URL, load local JSON, or auto-load via &module=URL (defaults to modules/golden.module.json).
  - World map editor supports mousewheel zoom and right-drag panning.
  - World map editor includes a stamp icon for 16x16 terrain chunks.
  - NPC patrol routes are visualized with draggable waypoints and click-to-add/remove controls.
  - World palette tiles show names on hover.
  - Interior editor shows NPC and item markers with click placement.
  - Ctrl+S downloads the current module; Ctrl+P launches playtest.

[ LICENSE ]
 MIT License

  Copyright (c) 2024 Dustland Contributors

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to deal
  in the Software without restriction, including without limitation the rights
  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
  copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in all
  copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
  SOFTWARE.

[ CREDITS ]
  - Design & code: you + contributors.
  - ASCII/NFO: generated in classic BBS spirit.
  - Inspirations: Wasteland (DOS), Planescape-like dialog energy, 90s P&P.

[ INSTALL TROUBLESHOOTING ]
  - install-deps.sh fails with '403 Forbidden' from mise.jdx.dev?
      * install-deps.sh now disables the mise repo and retries automatically.
      * If the repo is required, ensure your proxy allows access or update the URL.
      * You can re-enable it by editing /etc/apt/sources.list.d/mise.list.

[ CONTACT ]
  - GitHub issues preferred. Paste console logs & steps to reproduce.
  - Include browser/version and whether a save existed when it happened.

[ GREETS ]
  - To all the wasteland drifters, ANSI pirates, and CRT enjoyers. o7
_______________________________________________________________________________
